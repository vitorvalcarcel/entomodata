<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>EntomoData - Dashboard</title>
    <meta charset="UTF-8">
    
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
</head>
<body>

    <div class="header-container" style="border-left: 5px solid #2c3e50;">
        <h1>ğŸ Dashboard <span style="font-weight: normal; font-size: 0.8em; color: #7f8c8d;">| VisÃ£o Geral</span></h1>
        
        <div style="display: flex; gap: 10px;">
            <a href="/acervo" class="btn btn-novo" style="background-color: #2c3e50;">ğŸ“š Acessar Acervo Completo</a>
            
            <a href="/sistema/sair" class="btn btn-salvar" style="background-color: #c0392b; padding: 0 15px;" title="Desligar Sistema">
                ğŸ›‘
            </a>
        </div>
    </div>

    <div class="kpi-container dashboard-grid">
        <div class="card-kpi border-azul">
            <div class="kpi-titulo">Total de Exemplares</div>
            <div class="kpi-valor" th:text="${dashboard.totalExemplares}">0</div>
        </div>
        <div class="card-kpi border-verde">
            <div class="kpi-titulo">Riqueza (EspÃ©cies)</div>
            <div class="kpi-valor" th:text="${dashboard.totalEspecies}">0</div>
        </div>
        <div class="card-kpi border-roxo">
            <div class="kpi-titulo">FamÃ­lias</div>
            <div class="kpi-valor" th:text="${dashboard.totalFamilias}">0</div>
        </div>
        <div class="card-kpi border-laranja">
            <div class="kpi-titulo">GÃªneros</div>
            <div class="kpi-valor" th:text="${dashboard.totalGeneros}">0</div>
        </div>
        <div class="card-kpi border-vermelho">
            <div class="kpi-titulo">Sem IdentificaÃ§Ã£o</div>
            <div class="kpi-valor" th:text="${dashboard.semIdentificacao}">0</div>
        </div>
    </div>

    <div class="charts-container dashboard-grid">
        <div class="card-grafico">
            <h3>DistribuiÃ§Ã£o por FamÃ­lia</h3>
            <div class="chart-area"><canvas id="chartFamilia"></canvas></div>
        </div>
        
        <div class="card-grafico">
            <h3>Sazonalidade (Coletas por MÃªs)</h3>
            <div class="chart-area"><canvas id="chartSazonalidade"></canvas></div>
        </div>
        
        <div class="card-grafico">
            <h3>MÃ©todos de Coleta</h3>
            <div class="chart-area"><canvas id="chartMetodo"></canvas></div>
        </div>
        
        <div class="card-grafico">
            <h3>Coletas por Bioma</h3>
            <div class="chart-area"><canvas id="chartBioma"></canvas></div>
        </div>
    </div>

    <div class="map-container dashboard-grid">
        <h3 style="margin-top:0; color:#555;">ğŸ—ºï¸ Mapa de Calor das Coletas</h3>
        <div id="mapaCalor"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

    <script th:inline="javascript">
        /*<![CDATA[*/
        const dashboardData = /*[[${dashboard}]]*/ {};
        /*]]>*/
    </script>
    <script src="/js/dashboard.js"></script>

</body>
</html>