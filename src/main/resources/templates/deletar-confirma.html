<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Confirmar Exclusão</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/estilo.css}">
</head>
<body>

    <div class="header-container" style="border-left: 5px solid #c0392b;">
        <h1 style="color: #c0392b;">⚠️ Confirmar Exclusão</h1>
    </div>

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
        
        <div>
            <div class="card-tabela">
                <div style="padding: 15px; background-color: #fdedec; border-bottom: 1px solid #fadbd8; color: #c0392b; font-weight: bold;">
                    Registros encontrados para exclusão (<span th:text="${qtdParaApagar}">0</span>)
                </div>
                <div class="tabela-container" style="max-height: 400px; overflow-y: auto;">
                    <table style="min-width: 100%;">
                        <thead>
                            <tr>
                                <th>Cód</th>
                                <th>Espécie</th>
                                <th>Local</th>
                                <th>Coletor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="item : ${encontrados}">
                                <td th:text="${item.cod}"></td>
                                <td th:text="${item.especie}"></td>
                                <td th:text="${item.localidade}"></td>
                                <td th:text="${item.coletor}"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div>
            
            <div th:if="${erro}" style="margin-bottom: 20px; padding: 15px; background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 6px; color: #721c24;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                    <span style="font-size: 20px;">⛔</span>
                    <strong style="font-size: 16px;">Atenção!</strong>
                </div>
                <p style="margin: 0; font-size: 14px; line-height: 1.4;" th:text="${erro}"></p>
            </div>

            <div th:if="${!naoEncontrados.empty}" class="grupo-campos" style="padding: 15px; margin-bottom: 20px; background-color: #f8f9fa; border: 1px solid #ddd;">
                <span class="titulo-grupo" style="color: #7f8c8d; font-size: 0.9em; border-bottom: 1px solid #eee; margin-bottom: 10px;">
                    Códigos não localizados (<span th:text="${naoEncontrados.size()}"></span>)
                </span>
                <div style="max-height: 100px; overflow-y: auto; font-family: 'Consolas', monospace; font-size: 12px; color: #555; line-height: 1.5;">
                    <div th:each="cod : ${naoEncontrados}">
                        • <span th:text="${cod}"></span>
                    </div>
                </div>
                <p style="margin: 5px 0 0 0; font-size: 11px; color: #999;">Estes códigos serão ignorados.</p>
            </div>

            <div class="grupo-campos" style="border-color: #c0392b;">
                <span class="titulo-grupo" style="color: #c0392b;">Segurança</span>
                <p style="color: #333; font-size: 14px;">
                    Esta ação é <strong>irreversível</strong>.
                </p>
                
                <p style="font-size: 14px;">
                    Para confirmar, digite o número exato de registros no campo abaixo.
                </p>
                
                <div style="background: #f2f2f2; padding: 10px; border-radius: 4px; text-align: center; margin-bottom: 15px; font-weight: bold; font-size: 18px;">
                    Número: <span th:text="${qtdParaApagar}">0</span>
                </div>

                <form th:action="@{/deletar/confirmar}" method="post" style="text-align: center;">
                    <input type="hidden" name="qtdReal" th:value="${qtdParaApagar}">
                    <th:block th:each="item : ${encontrados}">
                        <input type="hidden" name="idsParaDeletar" th:value="${item.cod}">
                    </th:block>

                    <label style="display: block; margin-bottom: 8px;">Digite o número acima:</label>
                    
                    <input type="text" inputmode="numeric" pattern="[0-9]*" name="senhaConfirmacao" required 
                           placeholder="0"
                           style="width: 150px; display: block; margin: 0 auto; border: 2px solid #ccc; padding: 8px; font-size: 18px; text-align: center; border-radius: 6px; transition: border-color 0.2s;">
                    
                    <button type="submit" class="btn btn-salvar" 
                            style="width: 100%; background-color: #c0392b; margin-top: 20px; padding: 12px; font-size: 16px; font-weight: bold; box-shadow: 0 4px 6px rgba(192, 57, 43, 0.3);">
                        CONFIRMAR EXCLUSÃO
                    </button>
                </form>
                
                <a href="/deletar" class="btn btn-cancelar" style="display: block; text-align: center; margin-top: 15px; color: #7f8c8d; text-decoration: none; font-size: 14px;">
                    Cancelar e Voltar
                </a>
            </div>
        </div>
    </div>

    <script>
        let inputSenha = document.querySelector('input[name="senhaConfirmacao"]');
        
        inputSenha.addEventListener('focus', function() {
            this.style.borderColor = '#c0392b';
        });
        inputSenha.addEventListener('blur', function() {
            this.style.borderColor = '#ccc';
        });
        
        inputSenha.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    </script>

</body>
</html>